<!--
  TAILWIND
  line-through
  italic
  text-gray-700
-->

<div
  v-component="to-do-item"
  v-data:to-do="<%= JSON.stringify(toDo) %>"
  v-pass:filter-text
  class="flex items-stretch h-12"
>

  <div
    v-if="state === 'show'"
    class="flex items-center w-full"
  >
    <input
      type="checkbox"
      v-sync="toDo.complete"
      class="ml-1"
    >
    <p class="ml-4 w-6 text-sm text-gray-500">#<span v-text="toDo.id"></span></p>
    <p
      v-text="toDo.title"
      v-class:line-through="toDo.complete"
      v-class:italic="toDo.complete"
      v-class:text-gray-700="toDo.complete"
      class="flex-1 ml-2"
    ></p>
    <button
      v-event:click="state = 'edit'"
      v-disabled="toDo.complete"
      class="border border-gray-400 rounded shadow px-3 py-1 hover:shadow-lg active:shadow-none disabled:opacity-50 disabled:text-gray-700 disabled:shadow-none disabled:cursor-not-allowed"
    >Edit...</button>
    <button
      v-event:click="state = 'delete'"
      v-disabled="toDo.complete"
      class="border border-gray-400 rounded shadow px-3 py-1 hover:shadow-lg active:shadow-none disabled:opacity-50 disabled:text-gray-700 disabled:shadow-none disabled:cursor-not-allowed ml-2"
    >Delete...</button>
  </div>

  <div
    v-if="state === 'edit'"
    class="flex items-center w-full"
    hidden
  >
    <input
      v-sync="title"
      v-ref="title"
      v-event:keydown.enter="saveTitle"
      v-event:keydown.escape="state = 'show'"
      type="text"
      placeholder="Choose a title..."
      class="h-8 flex-1 rounded px-3 border-2 border-gray-300 mr-2"
    ></input>
    <button
      v-event:click="saveTitle"
      v-disabled="!validTitle"
      class="text-teal-600 border border-gray-400 rounded shadow px-3 py-1 hover:shadow-lg active:shadow-none disabled:opacity-50 disabled:text-gray-700 disabled:shadow-none disabled:cursor-not-allowed mr-2"
    >Save</button>
    <button
      v-event:click="state = 'show'"
      class="border border-gray-400 rounded shadow px-3 py-1 hover:shadow-lg active:shadow-none disabled:opacity-50 disabled:text-gray-700 disabled:shadow-none disabled:cursor-not-allowed"
    >Cancel</button>
  </div>

  <div
    v-if="state === 'delete'"
    class="flex items-center w-full"
    hidden
  >
    <p class="flex-1 text-red-800 ml-2">Are you sure you want to delete this to-do?</p>
    <button
      v-event:click="delete"
      class="text-red-600 border border-gray-400 rounded shadow px-3 py-1 hover:shadow-lg active:shadow-none disabled:opacity-50 disabled:text-gray-700 disabled:shadow-none disabled:cursor-not-allowed mr-2"
    >Delete</button>
    <button
      v-event:click="state = 'show'"
      class="border border-gray-400 rounded shadow px-3 py-1 hover:shadow-lg active:shadow-none disabled:opacity-50 disabled:text-gray-700 disabled:shadow-none disabled:cursor-not-allowed"
    >Cancel</button>
  </div>

</div>
